{{ define "main" }}

{{ $isRootTaxonomy := split .RelPermalink "/" | len | eq 3}}

<div class="page-section">
  <div class="container">
    <div class="row">
      {{ if $isRootTaxonomy}}
        {{ range .Pages }}
        <div class="col col-sm-6 col-lg-4">
          <div class="card-service wow fadeInUp d-flex flex-column flex-md-row align-items-center justify-content-around" style="gap: 1em">
            <div class="header mb-0">
              <img class="taxonomy-img" src='{{ relURL "img/default/service-1.svg" }}' alt="">
            </div>
            <div class="body">
              <h6 class="text-secondary">{{ .Title }}</h6>
              <p class="text-sm">{{ .Description }}</p>
              <a href='{{ relURL .Permalink }}' class="btn btn-sm btn-outline-primary">MÃ¡s</a>
            </div>
          </div>
        </div>
        {{ end }}
      {{ else }}
      {{ range (.Paginate .RegularPagesRecursive).Pages }}
        <div class="col-lg-4 py-3">
          <div class="card-blog">
            <div class="header">
              <div class="post-thumb">
                <img src='{{ relURL .Params.image }}' alt="">
              </div>
            </div>
            <div class="body">
              <h5 class="post-title"><a href="{{ .Permalink }}">{{ .Title }}</a></h5>
              <div class="post-date">Publicado en <a href="#">{{ .Date | time.Format ":date_medium" }}</a></div>
            </div>
          </div>
        </div>
        {{ end }}
      {{ end }}
    </div>
    {{ if eq $isRootTaxonomy false }}
    <div class="row">
      {{ $paginator := .Paginate .Pages }}
      <div class="col-12 mt-4 d-flex justify-content-center">
        {{ template "_internal/pagination.html" . }}
      </div>
    </div>
    {{ end }}
  </div> <!-- .container -->
</div> <!-- .page-section -->
{{ end }}